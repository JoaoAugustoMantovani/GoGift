<div class="form-container">
  <h2>Definir Nova Senha</h2>
  <p>Crie uma senha forte para proteger sua conta.</p>
  
  <form (ngSubmit)="onSubmit()" #resetPasswordForm="ngForm">
    
    <div class="form-group">
      <div class="inputs-container">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
          <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"/>
        </svg>
        <input 
          type="password" 
          id="newPassword" 
          name="newPassword" 
          placeholder="Nova Senha" 
          [(ngModel)]="newPassword" 
          #newPasswordInput="ngModel" 
          required
        >
      </div>
    </div>

    <div *ngIf="newPasswordInput.dirty || newPasswordInput.touched" class="password-rules">
      <ul>
          <li [ngClass]="{'valid': newPassword.length >= 8, 'invalid': newPassword.length < 8}">
              Pelo menos 8 caracteres
          </li>
          <li [ngClass]="{'valid': hasUpperCase(newPassword), 'invalid': !hasUpperCase(newPassword)}">
              Uma letra maiúscula
          </li>
          <li [ngClass]="{'valid': hasLowerCase(newPassword), 'invalid': !hasLowerCase(newPassword)}">
              Uma letra minúscula
          </li>
          <li [ngClass]="{'valid': hasNumber(newPassword), 'invalid': !hasNumber(newPassword)}">
              Pelo menos um número
          </li>
          <li [ngClass]="{'valid': hasSpecialChar(newPassword), 'invalid': !hasSpecialChar(newPassword)}">
              Um caractere especial (ex: !&#64;#$)
          </li>
      </ul>
    </div>

    <div class="form-group">
      <div class="inputs-container">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-shield-lock-fill" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z"/>
        </svg>
        <input 
          type="password" 
          id="confirmPassword" 
          name="confirmPassword" 
          placeholder="Confirme a Nova Senha" 
          [(ngModel)]="confirmPassword" 
          required
        >
      </div>
    </div>

    <div *ngIf="confirmPassword && newPassword !== confirmPassword" class="password-mismatch">
      As senhas não coincidem.
    </div>

    <button type="submit" [disabled]="!resetPasswordForm.form.valid || newPassword !== confirmPassword">
      Redefinir Senha
    </button>
  </form>
</div>
<div class="container">
    
    <button class="btn-toggle-filters" (click)="toggleMobileFilters()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
            <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
        </svg>
        {{ showMobileFilters ? 'Ocultar Filtros' : 'Filtrar Resultados' }}
    </button>

    <div class="filters" [class.mobile-visible]="showMobileFilters">
        <h3>Filtros</h3>

        <div class="filter-group">
            <label for="category">Categoria</label>
            <select id="category" [(ngModel)]="selectedCategoryId" class="form-control">
                <option [ngValue]="undefined">Todas</option>
                <option *ngFor="let category of categories" [value]="category.id">
                    {{ category.name }}
                </option>
            </select>
        </div>

        <div class="filter-group">
            <label>Preço</label>
            <div class="price-inputs">
                <input type="number" placeholder="Mín." [(ngModel)]="minPrice" class="form-control">
                <span>-</span>
                <input type="number" placeholder="Máx." [(ngModel)]="maxPrice" class="form-control">
            </div>
        </div>

        <div class="filter-group">
            <label for="sort">Ordenar por</label>
            <select id="sort" [(ngModel)]="sortBy" class="form-control">
                <option [ngValue]="undefined">Relevância</option>
                <option value="price_asc">Menor Preço</option>
                <option value="price_desc">Maior Preço</option>
                <option value="nota_desc">Melhor Avaliado</option>
            </select>
        </div>

        <div class="filter-actions">
            <button class="btn-clear" (click)="clearFilters()">Limpar Filtros</button>
            <button class="btn-apply" (click)="applyFilters()">Aplicar Filtros</button>
        </div>
    </div>

    <div class="content">
        <div class="infos-search">
            <p class="info-search" *ngIf="searchTerm">Resultados para: "{{ searchTerm }}"</p>
            <p class="info-search" *ngIf="!searchTerm">Todos os Gift Cards</p>
        </div>

        <div *ngIf="isLoading" class="loading-indicator">Carregando...</div>

        <div *ngIf="!isLoading && visibleGiftCards.length === 0" class="no-results">
            <p>Nenhum resultado encontrado<span *ngIf="searchTerm"> para "{{ searchTerm }}"</span>.</p>
        </div>

        <div *ngIf="!isLoading && visibleGiftCards.length > 0">
            <div class="row">
                <div class="cards">
                    <a *ngFor="let gc of visibleGiftCards" [routerLink]="['/product-page', gc.id]"
                        class="gift-card-link">
                        <app-gift-card-template [gcName]="gc.title" [gcText]="'R$ ' + (gc.desired_amount | number:'1.2-2')"
                            [gcImg]="'http://127.0.0.1:8000/uploads/' + gc.imageUrl" [gcImgAlt]="gc.title">
                        </app-gift-card-template>
                    </a>
                </div>
            </div>

            <div *ngIf="hasMoreItems" class="load-more-container">
                <button (click)="loadMore()" class="load-more-btn">Ver Mais</button>
            </div>
        </div>
    </div>
</div>
<br>
<app-footer></app-footer>